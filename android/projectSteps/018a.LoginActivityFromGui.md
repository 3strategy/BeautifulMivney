---
layout: page
title: "018a3 - LoginActivity Shell from GUI"
subtitle: "Create LoginActivity as Launcher, build login UI shell, and delay to MenuActivity"
tags: [Android, Activity, Login, GUI, Menu, Firebase, Authentication, Google Sign-In]
lang: en
---

{: .box-note}
This lesson creates a **UI shell** for login before deep Firebase work.

In this step we:

1. Create `LoginActivity` from Android Studio GUI (`Empty Views Activity`) in `activities`.
2. Mark it as `Launcher Activity` from the GUI wizard.
3. Build login screen fields and buttons (username, password, login, login with Google).
4. Temporarily skip real auth and auto-navigate to `MenuActivity` after a short delay.

We intentionally do **not** connect authentication yet.

<style>
main {
  direction: ltr !important;
  text-align: left !important;
}
</style>

## Step 1 - Create `LoginActivity` from GUI

<div class="two-columns">
<div markdown="1" class="column" style="flex: 1.2 1 0; min-width: 0;">

In Android Studio:

1. Right-click package `.../activities`.
2. `New` -> `Activity` -> `Empty Views Activity`.
3. Name: `LoginActivity`.
4. Keep package under `activities`.
5. Check `Launcher Activity`.
6. Finish.

</div>
<div markdown="1" class="column" style="flex: 0.8 1 0; min-width: 0;">

When creating the activity from GUI, use the launcher checkbox as shown:

<img src="/assets/img/018/image.png" alt="Create Empty Views Activity and check Launcher Activity" style="width: 100%; height: auto;" />

</div>
</div>

---

## Step 2 - Manifest sanity check (single launcher)

Update `AndroidManifest.xml` Because previous steps may already have `MenuActivity` as launcher, verify there is only **one** `MAIN/LAUNCHER` entry (we can expect 2 and you'll have to update this manually. main Menu's entry the same as Main's entry)

Target state:

- `LoginActivity` is launcher.
- `MenuActivity` is regular  activity (no launcher intent-filter, and not `exported`).

<div markdown ="1" class="box-warning">
If both activities have launcher intent-filters, app start behavior becomes inconsistent. Depending on device/launcher/Android version you can get:

- Two app icons,
- A chooser dialog (“Complete action using…”),
- Unpredictable “which one opens” behavior.

Note: When a behavior has intent-filter and is exported it can be launched directly from other applications.

</div>

## Step 3 - Build initial login XML shell

Replace the content of `app/src/main/res/layout/activity_login.xml` with the below xml so you have:

- Username (or email) field
- Password field
- Remember me checkbox (for later SharedPreferences lesson)
- Login button
- Login with Google button


```xml
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/main"
    android:orientation="vertical"
    android:padding="24dp"
    android:gravity="center_horizontal">

    <TextView
        android:id="@+id/tVtitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="Login"
        android:textStyle="bold"
        android:textSize="28sp"
        android:layout_marginBottom="20dp" />

    <EditText
        android:id="@+id/eTemail"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="User name / e-mail"
        android:inputType="textEmailAddress" />

    <EditText
        android:id="@+id/eTpass"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="12dp"
        android:hint="Password"
        android:inputType="textPassword" />

    <CheckBox
        android:id="@+id/cBstayconnect"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:text="Remember me" />

    <Button
        android:id="@+id/btn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:onClick="onLoginClick"
        android:text="Login" />

    <Button
        android:id="@+id/btnGoogleSignIn"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dp"
        android:onClick="onGoogleLoginClick"
        android:text="Login with Google" />

</LinearLayout>
```


### 3.1 Required cleanup: move UI texts to `strings.xml`

We consistently teach string resources, so students should **not leave hardcoded texts** in the final XML.

Each student should replace these hardcoded values with `@string/...` entries in `strings.xml`:

- `"Login"`
- `"User name / e-mail"`
- `"Password"`
- `"Remember me"`
- `"Login with Google"`

Do this as a small cleanup phase after the layout compiles.

## Step 4 - Temporary delayed navigation to `MenuActivity`

Until Firebase auth is wired, use delayed launch to skip login logic.

Edit `app/src/main/java/.../activities/LoginActivity.java`.
Below is a **diff against the current GUI-generated file** in `C:\Users\3stra\AndroidStudioProjects\TicTacMenu`:

```diff
 package com.example.tictacmenu.activities;
 
+import android.content.Intent;
+import android.content.SharedPreferences;
 import android.os.Bundle;
+import android.os.Handler;
+import android.os.Looper;
+import android.view.View;
+import android.widget.CheckBox;
+import android.widget.Toast;
 
 import androidx.activity.EdgeToEdge;
 import androidx.appcompat.app.AppCompatActivity;
 import androidx.core.graphics.Insets;
 import androidx.core.view.ViewCompat;
 import androidx.core.view.WindowInsetsCompat;
 
 import com.example.tictacmenu.R;
+import com.example.tictacmenu.shell.MenuActivity;
 
 public class LoginActivity extends AppCompatActivity {
+
+    private static final long LOGIN_SHELL_DELAY_MS = 4000;
+    private static final String PREFS_NAME = "PREFS_NAME";
+    private static final String KEY_STAY_CONNECT = "stayConnect";
+
+    private SharedPreferences settings;
+    private CheckBox cBstayconnect;
+    private final Handler handler = new Handler(Looper.getMainLooper());
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         EdgeToEdge.enable(this);
         setContentView(R.layout.activity_login);
         ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -> {
             Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());
             v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);
             return insets;
         });
+
+        settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
+        cBstayconnect = findViewById(R.id.cBstayconnect);
+
+        // SharedPreferences demo: restore and save the "remember me" checkbox.
+        cBstayconnect.setChecked(settings.getBoolean(KEY_STAY_CONNECT, false));
+        cBstayconnect.setOnCheckedChangeListener((buttonView, isChecked) ->
+                settings.edit().putBoolean(KEY_STAY_CONNECT, isChecked).apply()
+        );
+
+        // Temporary bridge: skip login until Firebase auth lesson is implemented.
+        handler.postDelayed(() -> {
+            settings.edit().putBoolean(KEY_STAY_CONNECT, cBstayconnect.isChecked()).apply();
+            startActivity(new Intent(LoginActivity.this, MenuActivity.class));
+            finish();
+        }, LOGIN_SHELL_DELAY_MS);
     }
+
+    public void onLoginClick(View view) {
+        Toast.makeText(this, "Email/password auth is added in a later lesson", Toast.LENGTH_SHORT).show();
+    }
+
+    public void onGoogleLoginClick(View view) {
+        Toast.makeText(this, "Google sign-in is an advanced later phase", Toast.LENGTH_SHORT).show();
+    }
+
+    @Override
+    protected void onDestroy() {
+        super.onDestroy();
+        handler.removeCallbacksAndMessages(null);
+    }
 }
```

{: .box-note}
This same delayed-navigation technique will later be reused in a dedicated Splash activity that appears **before** `LoginActivity`.

## Step 5 - Run validation

1. Build and run.
2. App opens to login screen.
3. After about 4 seconds, app navigates to `MenuActivity`.
4. No Firebase auth calls are required yet.

---

## Scope boundaries for this lesson

Not included in `018a3`:

- Real email/password Firebase auth calls
- `FBRef` creation and reference initialization
- Writing authenticated user data to RTDB

Those belong to separate lessons:

- Backend setup: [018b Firebase project + RTDB + Email/Password setup](/android/projectSteps/018b.FirebaseProjectRtdbAuthSetup)
- Auth wiring + `FBRef`: planned later in the sequence document (`193`).

---

## Advanced phase (can be done later): Google login

Reference implementation source:

- Presence commit: `11c8948681e84158c24528eda64c2125804e1499`
- Commit message note (important): generate debug SHA1 and add fingerprint.

### What gets added in advanced phase

1. Google Sign-In dependency (`play-services-auth`).
2. Google sign-in client initialization using `default_web_client_id`.
3. `startActivityForResult` for Google account picker.
4. `GoogleAuthProvider.getCredential(...)` + Firebase `signInWithCredential(...)`.

### Critical SHA1 step

Generate SHA1 from the machine debug keystore:

```powershell
"C:\Program Files\Android\Android Studio\jbr\bin\keytool.exe" -list -v -keystore "%USERPROFILE%\.android\debug.keystore" -alias androiddebugkey -storepass android -keypass android
```

Where to add this SHA1:

- Firebase Console -> Project settings -> General -> Your apps -> Android app -> `SHA certificate fingerprints` -> Add fingerprint.

Clarification:

- Yes, this is configured inside your Firebase project settings.
- It is effectively tied to the specific Android app identity (`package + SHA`) under that project.

{: .box-warning}
In a classroom shared Firebase project, each student machine usually has a different debug SHA1. Either register each student SHA1 or standardize a shared debug keystore for Google sign-in to work for everyone.

## Suggested commit split

1. `018a3: create LoginActivity from GUI as launcher`
2. `018a3: add login shell XML (email/password/login/google)`
3. `018a3: add delayed auto-navigation to MenuActivity`
4. Later advanced commit: `018a3-advanced: wire Google sign-in`
